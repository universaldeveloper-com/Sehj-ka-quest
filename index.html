<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Study Quest</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <h1>Rewards</h1>
        <p class="subtitle">Complete chapters to unlock cards.</p>
    </header>

    <div class="card-container" id="cards-wrapper"></div>

    <div class="final-message" id="final-reward">
        ‚ú® You did it! I'm so proud of you! ‚ú®
    </div>

    <!-- iOS Modal Overlay -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal" id="modal-box">
            <h3>Enter Password</h3>
            <p>Finish the chapter to get the code.</p>
            <input type="password" id="password-input" placeholder="Password" autocomplete="off">
            <div class="modal-actions">
                <button class="modal-btn" onclick="closeModal()">Cancel</button>
                <button class="modal-btn bold" onclick="checkPassword()">Unlock</button>
            </div>
        </div>
    </div>

    <!-- Audio Player -->
    <audio id="bg-music" loop preload="auto">
        <source src="music.mp3" type="audio/mpeg">
    </audio>

    <!-- üõ† DEBUG TOOL: This will tell you if the file exists -->
    <div style="margin-top: 40px; padding: 20px; background: #fff; border-radius: 12px; font-size: 12px; color: #333; max-width: 300px;">
        <strong>‚ö†Ô∏è SYSTEM CHECK (Remove later)</strong><br><br>
        
        Music File Status: <span id="status-text">Checking...</span><br><br>
        
        <button onclick="testPlay()" style="background: #007AFF; color: white; border: none; padding: 8px 12px; border-radius: 6px;">
            Force Play Music
        </button>
        <br><br>
        <small id="error-log" style="color: red;"></small>
    </div>

    <script src="script.js"></script>

    <!-- Diagnostic Script -->
    <script>
        // 1. Check if the file actually exists on GitHub
        fetch('music.mp3')
            .then(response => {
                const statusEl = document.getElementById('status-text');
                if (response.ok) {
                    statusEl.innerHTML = "‚úÖ <b>FOUND!</b> (File is accessible)";
                    statusEl.style.color = "green";
                } else {
                    statusEl.innerHTML = "‚ùå <b>MISSING (404)</b>";
                    statusEl.style.color = "red";
                    document.getElementById('error-log').innerText = "GitHub cannot see 'music.mp3'. Check file name spelling!";
                }
            })
            .catch(err => {
                document.getElementById('status-text').innerText = "Error checking file.";
            });

        function testPlay() {
            var audio = document.getElementById('bg-music');
            audio.volume = 1.0;
            audio.play()
                .then(() => alert("Playing! If you don't hear it, check your volume/silent switch."))
                .catch(e => alert("Play failed: " + e.message));
        }
    </script>
</body>
</html>
